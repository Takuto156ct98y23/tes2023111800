// æœ¬ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦ï¼š

import { splitButNotSplittingEmoji } from "../stringUtils";

// TinySegmenter 0.2 -- Super compact Japanese tokenizer in JavaScript
// (c) 2008 Taku Kudo <taku@chasen.org>
// TinySegmenter is freely distributable under the terms of a new BSD licence.
// For details, see http://chasen.org/~taku/software/TinySegmenter/LICENCE.txt

// modified for ES modules by Taisuke Fukuno 2022-05-30
// For details, see https://fukuno.jig.jp/3596

// modified by Takuto Nishimura

const patterns = {
  "[ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹åç™¾åƒä¸‡å„„å…†]": "M",
  "[ä¸€-é¾ ã€…ã€†ãƒµãƒ¶]": "H",
  "[ã-ã‚“]": "I",
  "[ã‚¡-ãƒ´ãƒ¼ï½±-ï¾ï¾ï½°]": "K",
  "[a-zA-Zï½-ï½šï¼¡-ï¼º]": "A",
  "[0-9ï¼-ï¼™]": "N",
};
const chartype = [];
for (const i in patterns) {
  const regexp = new RegExp(i);
  chartype.push([regexp, patterns[i]]);
}

const BIAS = -332;
const BC1 = { HH: 6, II: 2461, KH: 406, OH: -1378 };
const BC2 = {
  AA: -3267,
  AI: 2744,
  AN: -878,
  HH: -4070,
  HM: -1711,
  HN: 4012,
  HO: 3761,
  IA: 1327,
  IH: -1184,
  II: -1332,
  IK: 1721,
  IO: 5492,
  KI: 3831,
  KK: -8741,
  MH: -3132,
  MK: 3334,
  OO: -2920,
};
const BC3 = {
  HH: 996,
  HI: 626,
  HK: -721,
  HN: -1307,
  HO: -836,
  IH: -301,
  KK: 2762,
  MK: 1079,
  MM: 4034,
  OA: -1652,
  OH: 266,
};
const BP1 = { BB: 295, OB: 304, OO: -125, UB: 352 };
const BP2 = { BO: 60, OO: -1762 };
const BQ1 = {
  BHH: 1150,
  BHM: 1521,
  BII: -1158,
  BIM: 886,
  BMH: 1208,
  BNH: 449,
  BOH: -91,
  BOO: -2597,
  OHI: 451,
  OIH: -296,
  OKA: 1851,
  OKH: -1020,
  OKK: 904,
  OOO: 2965,
};
const BQ2 = {
  BHH: 118,
  BHI: -1159,
  BHM: 466,
  BIH: -919,
  BKK: -1720,
  BKO: 864,
  OHH: -1139,
  OHM: -181,
  OIH: 153,
  UHI: -1146,
};
const BQ3 = {
  BHH: -792,
  BHI: 2664,
  BII: -299,
  BKI: 419,
  BMH: 937,
  BMM: 8335,
  BNN: 998,
  BOH: 775,
  OHH: 2174,
  OHM: 439,
  OII: 280,
  OKH: 1798,
  OKI: -793,
  OKO: -2242,
  OMH: -2402,
  OOO: 11699,
};
const BQ4 = {
  BHH: -3895,
  BIH: 3761,
  BII: -4654,
  BIK: 1348,
  BKK: -1806,
  BMI: -3385,
  BOO: -12396,
  OAH: 926,
  OHH: 266,
  OHK: -2036,
  ONN: -973,
};
const BW1 = {
  ",ã¨": 660,
  ",åŒ": 727,
  B1ã‚: 1404,
  B1åŒ: 542,
  "ã€ã¨": 660,
  "ã€åŒ": 727,
  "ã€ã¨": 1682,
  ã‚ã£: 1505,
  ã„ã†: 1743,
  ã„ã£: -2055,
  ã„ã‚‹: 672,
  ã†ã—: -4817,
  ã†ã‚“: 665,
  ã‹ã‚‰: 3472,
  ãŒã‚‰: 600,
  ã“ã†: -790,
  ã“ã¨: 2083,
  ã“ã‚“: -1262,
  ã•ã‚‰: -4143,
  ã•ã‚“: 4573,
  ã—ãŸ: 2641,
  ã—ã¦: 1104,
  ã™ã§: -3399,
  ãã“: 1977,
  ãã‚Œ: -871,
  ãŸã¡: 1122,
  ãŸã‚: 601,
  ã£ãŸ: 3463,
  ã¤ã„: -802,
  ã¦ã„: 805,
  ã¦ã: 1249,
  ã§ã: 1127,
  ã§ã™: 3445,
  ã§ã¯: 844,
  ã¨ã„: -4915,
  ã¨ã¿: 1922,
  ã©ã“: 3887,
  ãªã„: 5713,
  ãªã£: 3015,
  ãªã©: 7379,
  ãªã‚“: -1113,
  ã«ã—: 2468,
  ã«ã¯: 1498,
  ã«ã‚‚: 1671,
  ã«å¯¾: -912,
  ã®ä¸€: -501,
  ã®ä¸­: 741,
  ã¾ã›: 2448,
  ã¾ã§: 1711,
  ã¾ã¾: 2600,
  ã¾ã‚‹: -2155,
  ã‚„ã‚€: -1947,
  ã‚ˆã£: -2565,
  ã‚ŒãŸ: 2369,
  ã‚Œã§: -913,
  ã‚’ã—: 1860,
  ã‚’è¦‹: 731,
  äº¡ã: -1886,
  äº¬éƒ½: 2558,
  å–ã‚Š: -2784,
  å¤§ã: -2604,
  å¤§é˜ª: 1497,
  å¹³æ–¹: -2314,
  å¼•ã: -1336,
  æ—¥æœ¬: -195,
  æœ¬å½“: -2423,
  æ¯æ—¥: -2113,
  ç›®æŒ‡: -724,
  ï¼¢ï¼‘ã‚: 1404,
  ï¼¢ï¼‘åŒ: 542,
  "ï½£ã¨": 1682,
};
const BW2 = {
  "..": -11822,
  11: -669,
  "â€•â€•": -5730,
  "âˆ’âˆ’": -13175,
  ã„ã†: -1609,
  ã†ã‹: 2490,
  ã‹ã—: -1350,
  ã‹ã‚‚: -602,
  ã‹ã‚‰: -7194,
  ã‹ã‚Œ: 4612,
  ãŒã„: 853,
  ãŒã‚‰: -3198,
  ããŸ: 1941,
  ããª: -1597,
  ã“ã¨: -8392,
  ã“ã®: -4193,
  ã•ã›: 4533,
  ã•ã‚Œ: 13168,
  ã•ã‚“: -3977,
  ã—ã„: -1819,
  ã—ã‹: -545,
  ã—ãŸ: 5078,
  ã—ã¦: 972,
  ã—ãª: 939,
  ãã®: -3744,
  ãŸã„: -1253,
  ãŸãŸ: -662,
  ãŸã : -3857,
  ãŸã¡: -786,
  ãŸã¨: 1224,
  ãŸã¯: -939,
  ã£ãŸ: 4589,
  ã£ã¦: 1647,
  ã£ã¨: -2094,
  ã¦ã„: 6144,
  ã¦ã: 3640,
  ã¦ã: 2551,
  ã¦ã¯: -3110,
  ã¦ã‚‚: -3065,
  ã§ã„: 2666,
  ã§ã: -1528,
  ã§ã—: -3828,
  ã§ã™: -4761,
  ã§ã‚‚: -4203,
  ã¨ã„: 1890,
  ã¨ã“: -1746,
  ã¨ã¨: -2279,
  ã¨ã®: 720,
  ã¨ã¿: 5168,
  ã¨ã‚‚: -3941,
  ãªã„: -2488,
  ãªãŒ: -1313,
  ãªã©: -6509,
  ãªã®: 2614,
  ãªã‚“: 3099,
  ã«ãŠ: -1615,
  ã«ã—: 2748,
  ã«ãª: 2454,
  ã«ã‚ˆ: -7236,
  ã«å¯¾: -14943,
  ã«å¾“: -4688,
  ã«é–¢: -11388,
  ã®ã‹: 2093,
  ã®ã§: -7059,
  ã®ã«: -6041,
  ã®ã®: -6125,
  ã¯ã„: 1073,
  ã¯ãŒ: -1033,
  ã¯ãš: -2532,
  ã°ã‚Œ: 1813,
  ã¾ã—: -1316,
  ã¾ã§: -6621,
  ã¾ã‚Œ: 5409,
  ã‚ã¦: -3153,
  ã‚‚ã„: 2230,
  ã‚‚ã®: -10713,
  ã‚‰ã‹: -944,
  ã‚‰ã—: -1611,
  ã‚‰ã«: -1897,
  ã‚Šã—: 651,
  ã‚Šã¾: 1620,
  ã‚ŒãŸ: 4270,
  ã‚Œã¦: 849,
  ã‚Œã°: 4114,
  ã‚ã†: 6067,
  ã‚ã‚Œ: 7901,
  ã‚’é€š: -11877,
  ã‚“ã : 728,
  ã‚“ãª: -4115,
  ä¸€äºº: 602,
  ä¸€æ–¹: -1375,
  ä¸€æ—¥: 970,
  ä¸€éƒ¨: -1051,
  ä¸ŠãŒ: -4479,
  ä¼šç¤¾: -1116,
  å‡ºã¦: 2163,
  åˆ†ã®: -7758,
  åŒå…š: 970,
  åŒæ—¥: -913,
  å¤§é˜ª: -2471,
  å§”å“¡: -1250,
  å°‘ãª: -1050,
  å¹´åº¦: -8669,
  å¹´é–“: -1626,
  åºœçœŒ: -2363,
  æ‰‹æ¨©: -1982,
  æ–°è: -4066,
  æ—¥æ–°: -722,
  æ—¥æœ¬: -7068,
  æ—¥ç±³: 3372,
  æ›œæ—¥: -601,
  æœé®®: -2355,
  æœ¬äºº: -2697,
  æ±äº¬: -1543,
  ç„¶ã¨: -1384,
  ç¤¾ä¼š: -1276,
  ç«‹ã¦: -990,
  ç¬¬ã«: -1612,
  ç±³å›½: -4268,
  "ï¼‘ï¼‘": -669,
};
const BW3 = {
  ã‚ãŸ: -2194,
  ã‚ã‚Š: 719,
  ã‚ã‚‹: 3846,
  "ã„.": -1185,
  "ã„ã€‚": -1185,
  ã„ã„: 5308,
  ã„ãˆ: 2079,
  ã„ã: 3029,
  ã„ãŸ: 2056,
  ã„ã£: 1883,
  ã„ã‚‹: 5600,
  ã„ã‚: 1527,
  ã†ã¡: 1117,
  ã†ã¨: 4798,
  ãˆã¨: 1454,
  "ã‹.": 2857,
  "ã‹ã€‚": 2857,
  ã‹ã‘: -743,
  ã‹ã£: -4098,
  ã‹ã«: -669,
  ã‹ã‚‰: 6520,
  ã‹ã‚Š: -2670,
  "ãŒ,": 1816,
  "ãŒã€": 1816,
  ãŒã: -4855,
  ãŒã‘: -1127,
  ãŒã£: -913,
  ãŒã‚‰: -4977,
  ãŒã‚Š: -2064,
  ããŸ: 1645,
  ã‘ã©: 1374,
  ã“ã¨: 7397,
  ã“ã®: 1542,
  ã“ã‚: -2757,
  ã•ã„: -714,
  ã•ã‚’: 976,
  "ã—,": 1557,
  "ã—ã€": 1557,
  ã—ã„: -3714,
  ã—ãŸ: 3562,
  ã—ã¦: 1449,
  ã—ãª: 2608,
  ã—ã¾: 1200,
  "ã™.": -1310,
  "ã™ã€‚": -1310,
  ã™ã‚‹: 6521,
  "ãš,": 3426,
  "ãšã€": 3426,
  ãšã«: 841,
  ãã†: 428,
  "ãŸ.": 8875,
  "ãŸã€‚": 8875,
  ãŸã„: -594,
  ãŸã®: 812,
  ãŸã‚Š: -1183,
  ãŸã‚‹: -853,
  "ã .": 4098,
  "ã ã€‚": 4098,
  ã ã£: 1004,
  ã£ãŸ: -4748,
  ã£ã¦: 300,
  ã¦ã„: 6240,
  ã¦ãŠ: 855,
  ã¦ã‚‚: 302,
  ã§ã™: 1437,
  ã§ã«: -1482,
  ã§ã¯: 2295,
  ã¨ã†: -1387,
  ã¨ã—: 2266,
  ã¨ã®: 541,
  ã¨ã‚‚: -3543,
  ã©ã†: 4664,
  ãªã„: 1796,
  ãªã: -903,
  ãªã©: 2135,
  "ã«,": -1021,
  "ã«ã€": -1021,
  ã«ã—: 1771,
  ã«ãª: 1906,
  ã«ã¯: 2644,
  "ã®,": -724,
  "ã®ã€": -724,
  ã®å­: -1000,
  "ã¯,": 1337,
  "ã¯ã€": 1337,
  ã¹ã: 2181,
  ã¾ã—: 1113,
  ã¾ã™: 6943,
  ã¾ã£: -1549,
  ã¾ã§: 6154,
  ã¾ã‚Œ: -793,
  ã‚‰ã—: 1479,
  ã‚‰ã‚Œ: 6820,
  ã‚‹ã‚‹: 3818,
  "ã‚Œ,": 854,
  "ã‚Œã€": 854,
  ã‚ŒãŸ: 1850,
  ã‚Œã¦: 1375,
  ã‚Œã°: -3246,
  ã‚Œã‚‹: 1091,
  ã‚ã‚Œ: -605,
  ã‚“ã : 606,
  ã‚“ã§: 798,
  ã‚«æœˆ: 990,
  ä¼šè­°: 860,
  å…¥ã‚Š: 1232,
  å¤§ä¼š: 2217,
  å§‹ã‚: 1681,
  å¸‚: 965,
  æ–°è: -5055,
  "æ—¥,": 974,
  "æ—¥ã€": 974,
  ç¤¾ä¼š: 2024,
  ï½¶æœˆ: 990,
};
const TC1 = {
  AAA: 1093,
  HHH: 1029,
  HHM: 580,
  HII: 998,
  HOH: -390,
  HOM: -331,
  IHI: 1169,
  IOH: -142,
  IOI: -1015,
  IOM: 467,
  MMH: 187,
  OOI: -1832,
};
const TC2 = {
  HHO: 2088,
  HII: -1023,
  HMM: -1154,
  IHI: -1965,
  KKH: 703,
  OII: -2649,
};
const TC3 = {
  AAA: -294,
  HHH: 346,
  HHI: -341,
  HII: -1088,
  HIK: 731,
  HOH: -1486,
  IHH: 128,
  IHI: -3041,
  IHO: -1935,
  IIH: -825,
  IIM: -1035,
  IOI: -542,
  KHH: -1216,
  KKA: 491,
  KKH: -1217,
  KOK: -1009,
  MHH: -2694,
  MHM: -457,
  MHO: 123,
  MMH: -471,
  NNH: -1689,
  NNO: 662,
  OHO: -3393,
};
const TC4 = {
  HHH: -203,
  HHI: 1344,
  HHK: 365,
  HHM: -122,
  HHN: 182,
  HHO: 669,
  HIH: 804,
  HII: 679,
  HOH: 446,
  IHH: 695,
  IHO: -2324,
  IIH: 321,
  III: 1497,
  IIO: 656,
  IOO: 54,
  KAK: 4845,
  KKA: 3386,
  KKK: 3065,
  MHH: -405,
  MHI: 201,
  MMH: -241,
  MMM: 661,
  MOM: 841,
};
const TQ1 = {
  BHHH: -227,
  BHHI: 316,
  BHIH: -132,
  BIHH: 60,
  BIII: 1595,
  BNHH: -744,
  BOHH: 225,
  BOOO: -908,
  OAKK: 482,
  OHHH: 281,
  OHIH: 249,
  OIHI: 200,
  OIIH: -68,
};
const TQ2 = { BIHH: -1401, BIII: -1033, BKAK: -543, BOOO: -5591 };
const TQ3 = {
  BHHH: 478,
  BHHM: -1073,
  BHIH: 222,
  BHII: -504,
  BIIH: -116,
  BIII: -105,
  BMHI: -863,
  BMHM: -464,
  BOMH: 620,
  OHHH: 346,
  OHHI: 1729,
  OHII: 997,
  OHMH: 481,
  OIHH: 623,
  OIIH: 1344,
  OKAK: 2792,
  OKHH: 587,
  OKKA: 679,
  OOHH: 110,
  OOII: -685,
};
const TQ4 = {
  BHHH: -721,
  BHHM: -3604,
  BHII: -966,
  BIIH: -607,
  BIII: -2181,
  OAAA: -2763,
  OAKK: 180,
  OHHH: -294,
  OHHI: 2446,
  OHHO: 480,
  OHIH: -1573,
  OIHH: 1935,
  OIHI: -493,
  OIIH: 626,
  OIII: -4007,
  OKAK: -8156,
};
const TW1 = { ã«ã¤ã„: -4681, æ±äº¬éƒ½: 2026 };
const TW2 = {
  ã‚ã‚‹ç¨‹: -2049,
  ã„ã£ãŸ: -1256,
  ã“ã‚ãŒ: -2434,
  ã—ã‚‡ã†: 3873,
  ãã®å¾Œ: -4430,
  ã ã£ã¦: -1049,
  ã¦ã„ãŸ: 1833,
  ã¨ã—ã¦: -4657,
  ã¨ã‚‚ã«: -4517,
  ã‚‚ã®ã§: 1882,
  ä¸€æ°—ã«: -792,
  åˆã‚ã¦: -1512,
  åŒæ™‚ã«: -8097,
  å¤§ããª: -1255,
  å¯¾ã—ã¦: -2721,
  ç¤¾ä¼šå…š: -3216,
};
const TW3 = {
  ã„ãŸã : -1734,
  ã—ã¦ã„: 1314,
  ã¨ã—ã¦: -4314,
  ã«ã¤ã„: -5483,
  ã«ã¨ã£: -5989,
  ã«å½“ãŸ: -6247,
  "ã®ã§,": -727,
  "ã®ã§ã€": -727,
  ã®ã‚‚ã®: -600,
  ã‚Œã‹ã‚‰: -3752,
  åäºŒæœˆ: -2287,
};
const TW4 = {
  "ã„ã†.": 8576,
  "ã„ã†ã€‚": 8576,
  ã‹ã‚‰ãª: -2348,
  ã—ã¦ã„: 2958,
  "ãŸãŒ,": 1516,
  "ãŸãŒã€": 1516,
  ã¦ã„ã‚‹: 1538,
  ã¨ã„ã†: 1349,
  ã¾ã—ãŸ: 5543,
  ã¾ã›ã‚“: 1097,
  ã‚ˆã†ã¨: -4258,
  ã‚ˆã‚‹ã¨: 5865,
};
const UC1 = { A: 484, K: 93, M: 645, O: -505 };
const UC2 = { A: 819, H: 1059, I: 409, M: 3987, N: 5775, O: 646 };
const UC3 = { A: -1370, I: 2311 };
const UC4 = {
  A: -2643,
  H: 1809,
  I: -1032,
  K: -3450,
  M: 3565,
  N: 3876,
  O: 6646,
};
const UC5 = { H: 313, I: -1238, K: -799, M: 539, O: -831 };
const UC6 = { H: -506, I: -253, K: 87, M: 247, O: -387 };
const UP1 = { O: -214 };
const UP2 = { B: 69, O: 935 };
const UP3 = { B: 189 };
const UQ1 = {
  BH: 21,
  BI: -12,
  BK: -99,
  BN: 142,
  BO: -56,
  OH: -95,
  OI: 477,
  OK: 410,
  OO: -2422,
};
const UQ2 = { BH: 216, BI: 113, OK: 1759 };
const UQ3 = {
  BA: -479,
  BH: 42,
  BI: 1913,
  BK: -7198,
  BM: 3160,
  BN: 6427,
  BO: 14761,
  OI: -827,
  ON: -3212,
};
const UW1 = {
  ",": 156,
  "ã€": 156,
  "ã€Œ": -463,
  ã‚: -941,
  ã†: -127,
  ãŒ: -553,
  ã: 121,
  ã“: 505,
  ã§: -201,
  ã¨: -547,
  ã©: -123,
  ã«: -789,
  ã®: -185,
  ã¯: -847,
  ã‚‚: -466,
  ã‚„: -470,
  ã‚ˆ: 182,
  ã‚‰: -292,
  ã‚Š: 208,
  ã‚Œ: 169,
  ã‚’: -446,
  ã‚“: -137,
  "ãƒ»": -135,
  ä¸»: -402,
  äº¬: -268,
  åŒº: -912,
  åˆ: 871,
  å›½: -460,
  å¤§: 561,
  å§”: 729,
  å¸‚: -411,
  æ—¥: -141,
  ç†: 361,
  ç”Ÿ: -408,
  çœŒ: -386,
  éƒ½: -718,
  "ï½¢": -463,
  "ï½¥": -135,
};
const UW2 = {
  ",": -829,
  "ã€": -829,
  ã€‡: 892,
  "ã€Œ": -645,
  "ã€": 3145,
  ã‚: -538,
  ã„: 505,
  ã†: 134,
  ãŠ: -502,
  ã‹: 1454,
  ãŒ: -856,
  ã: -412,
  ã“: 1141,
  ã•: 878,
  ã–: 540,
  ã—: 1529,
  ã™: -675,
  ã›: 300,
  ã: -1011,
  ãŸ: 188,
  ã : 1837,
  ã¤: -949,
  ã¦: -291,
  ã§: -268,
  ã¨: -981,
  ã©: 1273,
  ãª: 1063,
  ã«: -1764,
  ã®: 130,
  ã¯: -409,
  ã²: -1273,
  ã¹: 1261,
  ã¾: 600,
  ã‚‚: -1263,
  ã‚„: -402,
  ã‚ˆ: 1639,
  ã‚Š: -579,
  ã‚‹: -694,
  ã‚Œ: 571,
  ã‚’: -2516,
  ã‚“: 2095,
  ã‚¢: -587,
  ã‚«: 306,
  ã‚­: 568,
  ãƒƒ: 831,
  ä¸‰: -758,
  ä¸: -2150,
  ä¸–: -302,
  ä¸­: -968,
  ä¸»: -861,
  äº‹: 492,
  äºº: -123,
  ä¼š: 978,
  ä¿: 362,
  å…¥: 548,
  åˆ: -3025,
  å‰¯: -1566,
  åŒ—: -3414,
  åŒº: -422,
  å¤§: -1769,
  å¤©: -865,
  å¤ª: -483,
  å­: -1519,
  å­¦: 760,
  å®Ÿ: 1023,
  å°: -2009,
  å¸‚: -813,
  å¹´: -1060,
  å¼·: 1067,
  æ‰‹: -1519,
  æº: -1033,
  æ”¿: 1522,
  æ–‡: -1355,
  æ–°: -1682,
  æ—¥: -1815,
  æ˜: -1462,
  æœ€: -630,
  æœ: -1843,
  æœ¬: -1650,
  æ±: -931,
  æœ: -665,
  æ¬¡: -2378,
  æ°‘: -180,
  æ°—: -1740,
  ç†: 752,
  ç™º: 529,
  ç›®: -1584,
  ç›¸: -242,
  çœŒ: -1165,
  ç«‹: -763,
  ç¬¬: 810,
  ç±³: 509,
  è‡ª: -1353,
  è¡Œ: 838,
  è¥¿: -744,
  è¦‹: -3874,
  èª¿: 1010,
  è­°: 1198,
  è¾¼: 3041,
  é–‹: 1758,
  é–“: -1257,
  "ï½¢": -645,
  "ï½£": 3145,
  ï½¯: 831,
  ï½±: -587,
  ï½¶: 306,
  ï½·: 568,
};
const UW3 = {
  ",": 4889,
  1: -800,
  "âˆ’": -1723,
  "ã€": 4889,
  ã€…: -2311,
  ã€‡: 5827,
  "ã€": 2670,
  "ã€“": -3573,
  ã‚: -2696,
  ã„: 1006,
  ã†: 2342,
  ãˆ: 1983,
  ãŠ: -4864,
  ã‹: -1163,
  ãŒ: 3271,
  ã: 1004,
  ã‘: 388,
  ã’: 401,
  ã“: -3552,
  ã”: -3116,
  ã•: -1058,
  ã—: -395,
  ã™: 584,
  ã›: 3685,
  ã: -5228,
  ãŸ: 842,
  ã¡: -521,
  ã£: -1444,
  ã¤: -1081,
  ã¦: 6167,
  ã§: 2318,
  ã¨: 1691,
  ã©: -899,
  ãª: -2788,
  ã«: 2745,
  ã®: 4056,
  ã¯: 4555,
  ã²: -2171,
  ãµ: -1798,
  ã¸: 1199,
  ã»: -5516,
  ã¾: -4384,
  ã¿: -120,
  ã‚: 1205,
  ã‚‚: 2323,
  ã‚„: -788,
  ã‚ˆ: -202,
  ã‚‰: 727,
  ã‚Š: 649,
  ã‚‹: 5905,
  ã‚Œ: 2773,
  ã‚: -1207,
  ã‚’: 6620,
  ã‚“: -518,
  ã‚¢: 551,
  ã‚°: 1319,
  ã‚¹: 874,
  ãƒƒ: -1350,
  ãƒˆ: 521,
  ãƒ : 1109,
  ãƒ«: 1591,
  ãƒ­: 2201,
  ãƒ³: 278,
  "ãƒ»": -3794,
  ä¸€: -1619,
  ä¸‹: -1759,
  ä¸–: -2087,
  ä¸¡: 3815,
  ä¸­: 653,
  ä¸»: -758,
  äºˆ: -1193,
  äºŒ: 974,
  äºº: 2742,
  ä»Š: 792,
  ä»–: 1889,
  ä»¥: -1368,
  ä½: 811,
  ä½•: 4265,
  ä½œ: -361,
  ä¿: -2439,
  å…ƒ: 4858,
  å…š: 3593,
  å…¨: 1574,
  å…¬: -3030,
  å…­: 755,
  å…±: -1880,
  å††: 5807,
  å†: 3095,
  åˆ†: 457,
  åˆ: 2475,
  åˆ¥: 1129,
  å‰: 2286,
  å‰¯: 4437,
  åŠ›: 365,
  å‹•: -949,
  å‹™: -1872,
  åŒ–: 1327,
  åŒ—: -1038,
  åŒº: 4646,
  åƒ: -2309,
  åˆ: -783,
  å”: -1006,
  å£: 483,
  å³: 1233,
  å„: 3588,
  åˆ: -241,
  åŒ: 3906,
  å’Œ: -837,
  å“¡: 4513,
  å›½: 642,
  å‹: 1389,
  å ´: 1219,
  å¤–: -241,
  å¦»: 2016,
  å­¦: -1356,
  å®‰: -423,
  å®Ÿ: -1008,
  å®¶: 1078,
  å°: -513,
  å°‘: -3102,
  å·: 1155,
  å¸‚: 3197,
  å¹³: -1804,
  å¹´: 2416,
  åºƒ: -1030,
  åºœ: 1605,
  åº¦: 1452,
  å»º: -2352,
  å½“: -3885,
  å¾—: 1905,
  æ€: -1291,
  æ€§: 1822,
  æˆ¸: -488,
  æŒ‡: -3973,
  æ”¿: -2013,
  æ•™: -1479,
  æ•°: 3222,
  æ–‡: -1489,
  æ–°: 1764,
  æ—¥: 2099,
  æ—§: 5792,
  æ˜¨: -661,
  æ™‚: -1248,
  æ›œ: -951,
  æœ€: -937,
  æœˆ: 4125,
  æœŸ: 360,
  æ: 3094,
  æ‘: 364,
  æ±: -805,
  æ ¸: 5156,
  æ£®: 2438,
  æ¥­: 484,
  æ°: 2613,
  æ°‘: -1694,
  æ±º: -1073,
  æ³•: 1868,
  æµ·: -495,
  ç„¡: 979,
  ç‰©: 461,
  ç‰¹: -3850,
  ç”Ÿ: -273,
  ç”¨: 914,
  ç”º: 1215,
  çš„: 7313,
  ç›´: -1835,
  çœ: 792,
  çœŒ: 6293,
  çŸ¥: -1528,
  ç§: 4231,
  ç¨: 401,
  ç«‹: -960,
  ç¬¬: 1201,
  ç±³: 7767,
  ç³»: 3066,
  ç´„: 3663,
  ç´š: 1384,
  çµ±: -4229,
  ç·: 1163,
  ç·š: 1255,
  è€…: 6457,
  èƒ½: 725,
  è‡ª: -2869,
  è‹±: 785,
  è¦‹: 1044,
  èª¿: -562,
  è²¡: -733,
  è²»: 1777,
  è»Š: 1835,
  è»: 1375,
  è¾¼: -1504,
  é€š: -1136,
  é¸: -681,
  éƒ: 1026,
  éƒ¡: 4404,
  éƒ¨: 1200,
  é‡‘: 2163,
  é•·: 421,
  é–‹: -1432,
  é–“: 1302,
  é–¢: -1282,
  é›¨: 2009,
  é›»: -1045,
  é: 2066,
  é§…: 1620,
  "ï¼‘": -800,
  "ï½£": 2670,
  "ï½¥": -3794,
  ï½¯: -1350,
  ï½±: 551,
  ï½¸ï¾: 1319,
  ï½½: 874,
  ï¾„: 521,
  ï¾‘: 1109,
  ï¾™: 1591,
  ï¾›: 2201,
  ï¾: 278,
};
const UW4 = {
  ",": 3930,
  ".": 3508,
  "â€•": -4841,
  "ã€": 3930,
  "ã€‚": 3508,
  ã€‡: 4999,
  "ã€Œ": 1895,
  "ã€": 3798,
  "ã€“": -5156,
  ã‚: 4752,
  ã„: -3435,
  ã†: -640,
  ãˆ: -2514,
  ãŠ: 2405,
  ã‹: 530,
  ãŒ: 6006,
  ã: -4482,
  ã: -3821,
  ã: -3788,
  ã‘: -4376,
  ã’: -4734,
  ã“: 2255,
  ã”: 1979,
  ã•: 2864,
  ã—: -843,
  ã˜: -2506,
  ã™: -731,
  ãš: 1251,
  ã›: 181,
  ã: 4091,
  ãŸ: 5034,
  ã : 5408,
  ã¡: -3654,
  ã£: -5882,
  ã¤: -1659,
  ã¦: 3994,
  ã§: 7410,
  ã¨: 4547,
  ãª: 5433,
  ã«: 6499,
  ã¬: 1853,
  ã­: 1413,
  ã®: 7396,
  ã¯: 8578,
  ã°: 1940,
  ã²: 4249,
  ã³: -4134,
  ãµ: 1345,
  ã¸: 6665,
  ã¹: -744,
  ã»: 1464,
  ã¾: 1051,
  ã¿: -2082,
  ã‚€: -882,
  ã‚: -5046,
  ã‚‚: 4169,
  ã‚ƒ: -2666,
  ã‚„: 2795,
  ã‚‡: -1544,
  ã‚ˆ: 3351,
  ã‚‰: -2922,
  ã‚Š: -9726,
  ã‚‹: -14896,
  ã‚Œ: -2613,
  ã‚: -4570,
  ã‚: -1783,
  ã‚’: 13150,
  ã‚“: -2352,
  ã‚«: 2145,
  ã‚³: 1789,
  ã‚»: 1287,
  ãƒƒ: -724,
  ãƒˆ: -403,
  ãƒ¡: -1635,
  ãƒ©: -881,
  ãƒª: -541,
  ãƒ«: -856,
  ãƒ³: -3637,
  "ãƒ»": -4371,
  ãƒ¼: -11870,
  ä¸€: -2069,
  ä¸­: 2210,
  äºˆ: 782,
  äº‹: -190,
  äº•: -1768,
  äºº: 1036,
  ä»¥: 544,
  ä¼š: 950,
  ä½“: -1286,
  ä½œ: 530,
  å´: 4292,
  å…ˆ: 601,
  å…š: -2006,
  å…±: -1212,
  å†…: 584,
  å††: 788,
  åˆ: 1347,
  å‰: 1623,
  å‰¯: 3879,
  åŠ›: -302,
  å‹•: -740,
  å‹™: -2715,
  åŒ–: 776,
  åŒº: 4517,
  å”: 1013,
  å‚: 1555,
  åˆ: -1834,
  å’Œ: -681,
  å“¡: -910,
  å™¨: -851,
  å›: 1500,
  å›½: -619,
  åœ’: -1200,
  åœ°: 866,
  å ´: -1410,
  å¡: -2094,
  å£«: -1413,
  å¤š: 1067,
  å¤§: 571,
  å­: -4802,
  å­¦: -1397,
  å®š: -1057,
  å¯º: -809,
  å°: 1910,
  å±‹: -1328,
  å±±: -1500,
  å³¶: -2056,
  å·: -2667,
  å¸‚: 2771,
  å¹´: 374,
  åº: -4556,
  å¾Œ: 456,
  æ€§: 553,
  æ„Ÿ: 916,
  æ‰€: -1566,
  æ”¯: 856,
  æ”¹: 787,
  æ”¿: 2182,
  æ•™: 704,
  æ–‡: 522,
  æ–¹: -856,
  æ—¥: 1798,
  æ™‚: 1829,
  æœ€: 845,
  æœˆ: -9066,
  æœ¨: -485,
  æ¥: -442,
  æ ¡: -360,
  æ¥­: -1043,
  æ°: 5388,
  æ°‘: -2716,
  æ°—: -910,
  æ²¢: -939,
  æ¸ˆ: -543,
  ç‰©: -735,
  ç‡: 672,
  çƒ: -1267,
  ç”Ÿ: -1286,
  ç”£: -1101,
  ç”°: -2900,
  ç”º: 1826,
  çš„: 2586,
  ç›®: 922,
  çœ: -3485,
  çœŒ: 2997,
  ç©º: -867,
  ç«‹: -2112,
  ç¬¬: 788,
  ç±³: 2937,
  ç³»: 786,
  ç´„: 2171,
  çµŒ: 1146,
  çµ±: -1169,
  ç·: 940,
  ç·š: -994,
  ç½²: 749,
  è€…: 2145,
  èƒ½: -730,
  èˆ¬: -852,
  è¡Œ: -792,
  è¦: 792,
  è­¦: -1184,
  è­°: -244,
  è°·: -1000,
  è³: 730,
  è»Š: -1481,
  è»: 1158,
  è¼ª: -1433,
  è¾¼: -3370,
  è¿‘: 929,
  é“: -1291,
  é¸: 2596,
  éƒ: -4866,
  éƒ½: 1192,
  é‡: -1100,
  éŠ€: -2213,
  é•·: 357,
  é–“: -2344,
  é™¢: -2297,
  éš›: -2604,
  é›»: -878,
  é ˜: -1659,
  é¡Œ: -792,
  é¤¨: -1984,
  é¦–: 1749,
  é«˜: 2120,
  "ï½¢": 1895,
  "ï½£": 3798,
  "ï½¥": -4371,
  ï½¯: -724,
  ï½°: -11870,
  ï½¶: 2145,
  ï½º: 1789,
  ï½¾: 1287,
  ï¾„: -403,
  ï¾’: -1635,
  ï¾—: -881,
  ï¾˜: -541,
  ï¾™: -856,
  ï¾: -3637,
};
const UW5 = {
  ",": 465,
  ".": -299,
  1: -514,
  E2: -32768,
  "]": -2762,
  "ã€": 465,
  "ã€‚": -299,
  "ã€Œ": 363,
  ã‚: 1655,
  ã„: 331,
  ã†: -503,
  ãˆ: 1199,
  ãŠ: 527,
  ã‹: 647,
  ãŒ: -421,
  ã: 1624,
  ã: 1971,
  ã: 312,
  ã’: -983,
  ã•: -1537,
  ã—: -1371,
  ã™: -852,
  ã : -1186,
  ã¡: 1093,
  ã£: 52,
  ã¤: 921,
  ã¦: -18,
  ã§: -850,
  ã¨: -127,
  ã©: 1682,
  ãª: -787,
  ã«: -1224,
  ã®: -635,
  ã¯: -578,
  ã¹: 1001,
  ã¿: 502,
  ã‚: 865,
  ã‚ƒ: 3350,
  ã‚‡: 854,
  ã‚Š: -208,
  ã‚‹: 429,
  ã‚Œ: 504,
  ã‚: 419,
  ã‚’: -1264,
  ã‚“: 327,
  ã‚¤: 241,
  ãƒ«: 451,
  ãƒ³: -343,
  ä¸­: -871,
  äº¬: 722,
  ä¼š: -1153,
  å…š: -654,
  å‹™: 3519,
  åŒº: -901,
  å‘Š: 848,
  å“¡: 2104,
  å¤§: -1296,
  å­¦: -548,
  å®š: 1785,
  åµ: -1304,
  å¸‚: -2991,
  å¸­: 921,
  å¹´: 1763,
  æ€: 872,
  æ‰€: -814,
  æŒ™: 1618,
  æ–°: -1682,
  æ—¥: 218,
  æœˆ: -4353,
  æŸ»: 932,
  æ ¼: 1356,
  æ©Ÿ: -1508,
  æ°: -1347,
  ç”°: 240,
  ç”º: -3912,
  çš„: -3149,
  ç›¸: 1319,
  çœ: -1052,
  çœŒ: -4003,
  ç ”: -997,
  ç¤¾: -278,
  ç©º: -813,
  çµ±: 1955,
  è€…: -2233,
  è¡¨: 663,
  èª: -1073,
  è­°: 1219,
  é¸: -1018,
  éƒ: -368,
  é•·: 786,
  é–“: 1191,
  é¡Œ: 2368,
  é¤¨: -689,
  "ï¼‘": -514,
  ï¼¥ï¼’: -32768,
  "ï½¢": 363,
  ï½²: 241,
  ï¾™: 451,
  ï¾: -343,
};
const UW6 = {
  ",": 227,
  ".": 808,
  1: -270,
  E1: 306,
  "ã€": 227,
  "ã€‚": 808,
  ã‚: -307,
  ã†: 189,
  ã‹: 241,
  ãŒ: -73,
  ã: -121,
  ã“: -200,
  ã˜: 1782,
  ã™: 383,
  ãŸ: -428,
  ã£: 573,
  ã¦: -1014,
  ã§: 101,
  ã¨: -105,
  ãª: -253,
  ã«: -149,
  ã®: -417,
  ã¯: -236,
  ã‚‚: -206,
  ã‚Š: 187,
  ã‚‹: -135,
  ã‚’: 195,
  ãƒ«: -673,
  ãƒ³: -496,
  ä¸€: -277,
  ä¸­: 201,
  ä»¶: -800,
  ä¼š: 624,
  å‰: 302,
  åŒº: 1792,
  å“¡: -1212,
  å§”: 798,
  å­¦: -960,
  å¸‚: 887,
  åºƒ: -695,
  å¾Œ: 535,
  æ¥­: -697,
  ç›¸: 753,
  ç¤¾: -507,
  ç¦: 974,
  ç©º: -822,
  è€…: 1811,
  é€£: 463,
  éƒ: 1082,
  "ï¼‘": -270,
  ï¼¥ï¼‘: 306,
  ï¾™: -673,
  ï¾: -496,
};

const ctype_ = (str) => {
  for (const i in chartype) {
    if (str.match(chartype[i][0])) {
      return chartype[i][1];
    }
  }
  return "O";
};

const ts = (v) => (v ? v : 0);

// const segment = (input) => {
export const getSegmentsByTinySegmenter = (input) => {
  if (input === null || input === undefined || input === "") {
    return [];
  }
  const result = [];
  const seg = ["B3", "B2", "B1"];
  const ctype = ["O", "O", "O"];
  // const o = input.split("");
  // emojiãŒéå‰°ã«åˆ†å‰²ã•ã‚Œã‚‹ã®ã§.splitã¯ä½¿ã‚ãªã„ï¼ˆä¾‹ï¼š'ğŸ˜‚'â†’['\uD83D', '\uDE02']ï¼‰ã€‚ä»£ã‚ã‚Šã«ES6ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’ä½¿ã†ã€‚
  // ãŸã ã—ã€Œ"ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§"ã€ã®ã‚ˆã†ã«å¯¾å¿œã—ãªã„çµµæ–‡å­—ã‚‚ã‚ã‚‹ï¼ˆã€Œ'ğŸ‘¨', 'â€', 'ğŸ‘¨â€', 'ğŸ‘§', 'â€ğŸ‘§'ã€ã«ãªã£ã¦ã—ã¾ã†ï¼‰ã€‚é‡è¦æ€§ã®è¦³ç‚¹ã‹ã‚‰ä¿®æ­£ã—ãªã„ã€‚ãªãŠã€ã“ã‚Œã‚‚Intl.Segmenterã§è§£æ±ºå¯èƒ½ã€‚firefoxã«Intl.SegmenterãŒå¯¾å¿œã—ãŸã‚‰æ›¸ãæ›ãˆã‚ˆã†
  //
  const o = splitButNotSplittingEmoji(input);

  for (const i of o) {
    seg.push(i);
    ctype.push(ctype_(i));
  }
  seg.push("E1");
  seg.push("E2");
  seg.push("E3");
  ctype.push("O");
  ctype.push("O");
  ctype.push("O");
  let word = seg[3];
  let p1 = "U";
  let p2 = "U";
  let p3 = "U";
  for (let i = 4; i < seg.length - 3; i++) {
    let score = BIAS;
    const w1 = seg[i - 3];
    const w2 = seg[i - 2];
    const w3 = seg[i - 1];
    const w4 = seg[i];
    const w5 = seg[i + 1];
    const w6 = seg[i + 2];
    const c1 = ctype[i - 3];
    const c2 = ctype[i - 2];
    const c3 = ctype[i - 1];
    const c4 = ctype[i];
    const c5 = ctype[i + 1];
    const c6 = ctype[i + 2];
    score += ts(UP1[p1]);
    score += ts(UP2[p2]);
    score += ts(UP3[p3]);
    score += ts(BP1[p1 + p2]);
    score += ts(BP2[p2 + p3]);
    score += ts(UW1[w1]);
    score += ts(UW2[w2]);
    score += ts(UW3[w3]);
    score += ts(UW4[w4]);
    score += ts(UW5[w5]);
    score += ts(UW6[w6]);
    score += ts(BW1[w2 + w3]);
    score += ts(BW2[w3 + w4]);
    score += ts(BW3[w4 + w5]);
    score += ts(TW1[w1 + w2 + w3]);
    score += ts(TW2[w2 + w3 + w4]);
    score += ts(TW3[w3 + w4 + w5]);
    score += ts(TW4[w4 + w5 + w6]);
    score += ts(UC1[c1]);
    score += ts(UC2[c2]);
    score += ts(UC3[c3]);
    score += ts(UC4[c4]);
    score += ts(UC5[c5]);
    score += ts(UC6[c6]);
    score += ts(BC1[c2 + c3]);
    score += ts(BC2[c3 + c4]);
    score += ts(BC3[c4 + c5]);
    score += ts(TC1[c1 + c2 + c3]);
    score += ts(TC2[c2 + c3 + c4]);
    score += ts(TC3[c3 + c4 + c5]);
    score += ts(TC4[c4 + c5 + c6]);
    //  score += ts(TC5[c4 + c5 + c6]);
    score += ts(UQ1[p1 + c1]);
    score += ts(UQ2[p2 + c2]);
    score += ts(UQ3[p3 + c3]);
    score += ts(BQ1[p2 + c2 + c3]);
    score += ts(BQ2[p2 + c3 + c4]);
    score += ts(BQ3[p3 + c2 + c3]);
    score += ts(BQ4[p3 + c3 + c4]);
    score += ts(TQ1[p2 + c1 + c2 + c3]);
    score += ts(TQ2[p2 + c2 + c3 + c4]);
    score += ts(TQ3[p3 + c1 + c2 + c3]);
    score += ts(TQ4[p3 + c2 + c3 + c4]);
    let p = "O";
    if (score > 0) {
      result.push(word);
      word = "";
      p = "B";
    }
    p1 = p2;
    p2 = p3;
    p3 = p;
    word += seg[i];
  }
  result.push(word);
  return result;
};

// export const TinySegmenter = { getSegmentsByTinySegmenter };
